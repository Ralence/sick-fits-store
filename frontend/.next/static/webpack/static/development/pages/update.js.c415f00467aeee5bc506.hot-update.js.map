{"version":3,"file":"static/webpack/static\\development\\pages\\update.js.c415f00467aeee5bc506.hot-update.js","sources":["webpack:///./components/UpdateItem.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport gql from 'graphql-tag';\r\nimport { Mutation, Query } from 'react-apollo';\r\nimport Router from 'next/router';\r\nimport Form from './styles/Form';\r\nimport formatMoney from '../lib/formatMoney';\r\nimport Error from './ErrorMessage';\r\n\r\nconst SINGLE_ITEM_QUERY = gql`\r\n    query SINGLE_ITEM_QUERY($id: ID!) {\r\n        item(where: {id: $id}) {\r\n            id,\r\n            title,\r\n            description,\r\n            price\r\n        }\r\n    }\r\n`;\r\n\r\nconst UPDATE_ITEM_MUTATION = gql`\r\n    mutation UPDATE_ITEM_MUTATION(\r\n\t\t\t  $id: ID!\r\n        $title: String\r\n        $description:String\r\n        $price: Int\r\n    ) {\r\n        updateItem(\r\n\t\t\t\t\t\tid: $id\r\n            title: $title\r\n            description: $description\r\n            price: $price\r\n        ) {\r\n            id\r\n\t\t\t\t\t\ttitle\r\n\t\t\t\t\t\tdescription\r\n\t\t\t\t\t\tprice\r\n        }\r\n    }\r\n`;\r\n\r\nclass UpdateItem extends Component {\r\n\tstate = {};\r\n\r\n\thandleChange = (e) => {\r\n\t\tconst { name, type, value } = e.target;\r\n\t\tconst val = type === 'number' ? parseFloat(value) : value\r\n\t\tthis.setState({ [name]: val });\r\n\t}\r\n\r\n\thandleUpdateItem = async (e, updateItem) => {\r\n\t\t// Stop the form from submitting\r\n\t\te.preventDefault();\r\n\t\t// Call the mutation\r\n\t\tconst res = await updateItem({\r\n\t\t\tvariables: {\r\n\t\t\t\tid: this.props.id,\r\n\t\t\t\t...this.state\r\n\t\t\t}\r\n\t\t})\r\n\t\t// Change them to single item page\r\n\t\tconsole.log(res)\r\n\t\tRouter.push({\r\n\t\t\tpathname: '/item',\r\n\t\t\tquery: { id: res.data.updateItem.id }\r\n\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Query query={SINGLE_ITEM_QUERY} variables={{ id: this.props.id }}>\r\n\t\t\t\t{({ data, loading }) => {\r\n\t\t\t\t\tif (loading) return <p>Loading...</p>\r\n\t\t\t\t\tif (!data.item) return <p>No Item Found!</p>\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Mutation mutation={UPDATE_ITEM_MUTATION} variables={this.state}>\r\n\t\t\t\t\t\t\t{(updateItem, { loading, error }) => (\r\n\t\t\t\t\t\t\t\t<Form onSubmit={(e) => this.handleUpdateItem(e, updateItem)}>\r\n\t\t\t\t\t\t\t\t\t<Error error={error} />\r\n\t\t\t\t\t\t\t\t\t<fieldset disabled={loading} aria-busy={loading}>\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor='title'>\r\n\t\t\t\t\t\t\t\t\t\t\tTitle\r\n                            <input\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\tid='title'\r\n\t\t\t\t\t\t\t\t\t\t\t\tname='title'\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Title'\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={data.item.title}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleChange} />\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor='price'>\r\n\t\t\t\t\t\t\t\t\t\t\tPrice\r\n                            <input\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype='number'\r\n\t\t\t\t\t\t\t\t\t\t\t\tid='price'\r\n\t\t\t\t\t\t\t\t\t\t\t\tname='price'\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Price'\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={data.item.price}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleChange} />\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor='description'>\r\n\t\t\t\t\t\t\t\t\t\t\tDescription\r\n                            <textarea\r\n\t\t\t\t\t\t\t\t\t\t\t\tid='description'\r\n\t\t\t\t\t\t\t\t\t\t\t\tname='description'\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter A Description'\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={data.item.description}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleChange} />\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t<button type='submit'>Sav{loading ? 'ing' : 'e'} Changes</button>\r\n\t\t\t\t\t\t\t\t\t</fieldset>\r\n\t\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Mutation>\r\n\t\t\t\t\t)\r\n\t\t\t\t}}\r\n\t\t\t</Query>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default UpdateItem;\r\nexport {\r\n\tUPDATE_ITEM_MUTATION\r\n};"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAWA;AACA;AAoBA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AACA;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AAAA;AAKA;AACA;AADA;AADA;AACA;AALA;AAIA;AAMA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAFA;AACA;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;AAiBA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AApCA;AA0CA;AAIA;;;;AAjFA;AACA;AAmFA;;;;;A","sourceRoot":""}